!function($,_scope){"use strict";if(_scope=void 0===_scope?window:_scope,!_scope._pickyImg){$=$;var _w=window,_pickyImg=function(){var args,pad,wChangeTimer,whichSrc,srcMap,selector,bindMe,binder,wStopped,wTrigger,isFinished,defMap,getNoscriptSrc,ME={},UA=void 0!==_scope._UAjammer?_scope._UAjammer:void 0,wIsStopped=!0,origin={},callbacks={};return ME.doCallback=function(event){var func=callbacks[event];void 0!==func&&"function"==typeof callbacks[event]&&func()},ME.init=function(initArgs){$().inView||($.fn.inView=function(j){var h=!1,g=$(window);if(this.length>0){var i=null===this.offset()?0:this.offset().top,f=i+this.height();j=void 0===j?g.height():j,h=g.scrollTop()+g.height()+j>=i&&g.scrollTop()-j<=f?!0:!1}return h}),args=void 0!==initArgs?initArgs:{},pad=void 0!==args.pad?args.pad:_w.outerHeight,whichSrc=void 0!==args.whichSrc?args.whichSrc:"src-default",srcMap=void 0!==args.srcMap?args.srcMap:void 0,selector=void 0!==args.selector?args.selector:"._picky",bindMe=void 0!==args.bindMe?args.bindMe:!0,void 0===args.callbacks&&(args.callbacks={}),callbacks={init:void 0!==args.callbacks.init?args.callbacks.init:null,finishedInit:void 0!==args.callbacks.finishedInit?args.callbacks.finishedInit:null,picking:void 0!==args.callbacks.picking?args.callbacks.picking:null,finished:void 0!==args.callbacks.finished?args.callbacks.finished:null},whichSrc="function"==typeof srcMap?srcMap():defMap(),ME.doCallback("init"),bindMe&&binder(),ME.doCallback("finishedInit")},defMap=function(){if(void 0===UA||void 0!==srcMap)return whichSrc;var chosenSrc=whichSrc;switch(!0){case"phone"==UA.Venue:chosenSrc=UA.Pixels>=2?"src-phonex2":"src-phone";break;case"tablet"==UA.Venue:chosenSrc=UA.Pixels>=2?"src-tabletx2":"src-tablet";break;case"desktop"==UA.Venue:chosenSrc=UA.Pixels>=2?"src-desktopx2":"src-desktop"}return chosenSrc},binder=function(){$(_w).on("resize._picky",function(){wTrigger()}),$(document.body).on("scroll._picky",function(){wTrigger()}),wStopped()},wTrigger=function(){wIsStopped=!1,clearTimeout(wChangeTimer),wChangeTimer=setTimeout(wStopped,150)},wStopped=function(){wIsStopped=!0,ME.doCallback("picking"),$(_w).trigger("picky_picking"),$("body").removeClass("_picky_finished"),$(selector+':not("._picky_picked")').each(function(){ME.pickMe($(this))})},ME.pickMe=function(dummy,which_src,force){if(which_src=void 0!==which_src&&which_src?which_src:whichSrc,which_src=which_src.replace("data-",""),force=void 0===force?!1:force,dummy.inView(pad)&&!dummy.hasClass("_picky_picking")&&(!dummy.hasClass("_picky_picked")||force)){dummy.addClass("_picky_picking");var imgLoad_handler,src=(dummy.find("noscript"),dummy.data(void 0===dummy.data(which_src)?"src-default":which_src)),img=new Image,imgClass=dummy.data("class"),imgAlt=dummy.data("alt");if(src=void 0!==src?src:getNoscriptSrc(dummy),imgLoad_handler=function(){dummy.hasClass("_picky_bg")?dummy.css({"background-image":"url("+src+")"}):dummy.prepend($(this)),"msie"==_UAjammer.Browser.Name&&_UAjammer.Browser.Version<=8&&$(this).height($(this).height()*$(this).width()/this.width),$(this).removeClass("_picky_picking").attr("alt",imgAlt),setTimeout(function(){dummy.removeClass("_picky_picking").addClass("_picky_picked"),isFinished()},10)},$(img).addClass(imgClass).addClass("_picky_picking"),origin[src]){var originimg=$(origin[src]);originimg.hasClass("_picky_picked")?originimg.on("load",imgLoad_handler.bind(img)):imgLoad_handler.bind(img)()}else origin[src]=img,img.onload=imgLoad_handler;dummy.data("pref-src",src),img.src=src}},getNoscriptSrc=function(dummy){var noscript=dummy.find("noscript")[0];return $(noscript).html().match(/src="([^"]+)"/)[1]},isFinished=function(){$(selector+":not(._picky_picked)").length<=0&&($("body").addClass("_picky_finished"),$(_w).trigger("picky_finished"),ME.doCallback("finished"))},ME}();_scope._pickyImg=_pickyImg}}(jQuery||$,"undefined"==typeof scope?window:scope),"function"==typeof define&&define("_pickyImg",[],function(){return _pickyImg});